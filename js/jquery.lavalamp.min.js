/**
 * Lava Lamp
 * http://www.lavalamp.magicmediamuse.com/
 *
 * Author
 * Richard Hung
 * http://www.magicmediamuse.com/
 *
 * Version
 * 1.0.2
 * 
 * Copyright (c) 2013 Richard Hung.
 * 
 * License
 * Lava Lamp by Richard Hung is licensed under a Creative Commons Attribution-NonCommercial 3.0 Unported License.
 * http://creativecommons.org/licenses/by-nc/3.0/deed.en_US
 */

(function(e){var t={init:function(t){var n={easing:"swing",duration:700,margins:false,setOnClick:false,activeObj:".active"};var t=e.extend({},n,t);return this.each(function(){var n=t.easing;var r=t.duration;var i=t.margins;var s=t.setOnClick;var o=t.activeObj;var u=e(this);var a=u.children();var f=u.children(o);if(f.length==0){f=a.eq(0)}u.data({easing:n,duration:r,margins:i,setOnClick:s});u.addClass("lavalamp").css({position:"relative"});var l=e('<div class="lavalamp-object" />').prependTo(u).css({position:"absolute"});a.addClass("lavalamp-item").css({zIndex:5,position:"relative"});var c=f.outerWidth(i);var h=f.outerHeight(i);var p=f.position().top;var d=f.position().left;var v=f.css("marginTop");var m=f.css("marginLeft");if(!i){m=parseInt(m);v=parseInt(v);d=d+m;p=p+v}l.css({width:c,height:h,top:p,left:d});enter=function(){var t=e(this);u.lavalamp("anim",t)};leave=function(){u.lavalamp("anim",f)};u.on("mouseenter",".lavalamp-item",enter);u.on("mouseleave",".lavalamp-item",leave);if(s){e(a).click(function(){f=e(this)})}})},destroy:function(){return this.each(function(){var t=e(this);var n=t.children(".lavalamp-item");t.off("mouseenter",".lavalamp-item",enter);t.off("mouseleave",".lavalamp-item",leave);t.removeClass("lavalamp");n.removeClass("lavalamp-item");t.children(".lavalamp-object").remove();t.removeData()})},update:function(){return this.each(function(){var t=e(this);var n=t.children(":not(.lavalamp-object)");n.addClass("lavalamp-item").css({zIndex:5,position:"relative"})})},anim:function(e){var t=this;var n=t.data("duration");var r=t.data("easing");var i=t.data("margins");var s=t.children(".lavalamp-object");var o=e.outerWidth(i);var u=e.outerHeight(i);var a=e.position().top;var f=e.position().left;var l=e.css("marginTop");var c=e.css("marginLeft");if(!i){c=parseInt(c);l=parseInt(l);f=f+c;a=a+l}s.stop(true,false).animate({width:o,height:u,top:a,left:f},n,r)}};e.fn.lavalamp=function(n){var r;var i;if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist on jQuery.lavalamp")}}})(jQuery)