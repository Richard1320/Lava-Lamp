/**
 * Lava Lamp
 * http://lavalamp.magicmediamuse.com/
 *
 * Author
 * Richard Hung
 * http://www.magicmediamuse.com/
 *
 * Version
 * 1.0.5
 * 
 * Copyright (c) 2014 Richard Hung.
 * 
 * License
 * Lava Lamp by Richard Hung is licensed under a Creative Commons Attribution-NonCommercial 3.0 Unported License.
 * http://creativecommons.org/licenses/by-nc/3.0/deed.en_US
 */


(function(e){var t={init:function(t){var i={easing:"swing",duration:700,margins:false,setOnClick:false,activeObj:".active",autoUpdate:false,updateTime:100};var t=e.extend({},i,t);return this.each(function(){var i=t.easing;var s=t.duration;var o=t.margins;var u=t.setOnClick;var a=t.activeObj;var f=t.autoUpdate;var l=t.updateTime;var c=e(this);var h=c.children();var p=c.children(a);if(p.length==0){p=h.eq(0)}c.data({easing:i,duration:s,margins:o,setOnClick:u,active:p,isAnim:false});c.addClass("lavalamp").css({position:"relative"});var d=e('<div class="lavalamp-object" />').prependTo(c).css({position:"absolute"});h.addClass("lavalamp-item").css({zIndex:5,position:"relative"});var v=p.outerWidth(o);var m=p.outerHeight(o);var g=p.position().top;var y=p.position().left;var b=p.css("marginTop");var w=p.css("marginLeft");if(!o){w=parseInt(w);b=parseInt(b);y=y+w;g=g+b}d.css({width:v,height:m,top:g,left:y});var E=false;n=function(){var t=e(this);E=true;c.lavalamp("anim",t)};r=function(){var e=c.data("active");E=false;c.lavalamp("anim",e)};c.on("mouseenter",".lavalamp-item",n);c.on("mouseleave",".lavalamp-item",r);if(u){e(h).click(function(){p=e(this);c.data("active",p)})}if(f){setInterval(function(){var e=c.data("isAnim");if(E==false&&e==false){c.lavalamp("update")}},l)}})},destroy:function(){return this.each(function(){var t=e(this);var i=t.children(".lavalamp-item");t.off("mouseenter",".lavalamp-item",n);t.off("mouseleave",".lavalamp-item",r);t.removeClass("lavalamp");i.removeClass("lavalamp-item");t.children(".lavalamp-object").remove();t.removeData()})},update:function(){return this.each(function(){var t=e(this);var n=t.children(":not(.lavalamp-object)");var r=t.data("active");var i=t.children(".lavalamp-object");n.addClass("lavalamp-item").css({zIndex:5,position:"relative"});t.lavalamp("anim",r)})},anim:function(e){var t=this;var n=t.data("duration");var r=t.data("easing");var i=t.data("margins");var s=t.children(".lavalamp-object");var o=e.outerWidth(i);var u=e.outerHeight(i);var a=e.position().top;var f=e.position().left;var l=e.css("marginTop");var c=e.css("marginLeft");if(!i){c=parseInt(c);l=parseInt(l);f=f+c;a=a+l}t.data("isAnim",true);s.stop(true,false).animate({width:o,height:u,top:a,left:f},n,r,function(){t.data("isAnim",false)})}};e.fn.lavalamp=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist on jQuery.lavalamp")}};var n,r})(jQuery)